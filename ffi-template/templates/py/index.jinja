from foreignc import *

class {{ class_name }}(BaseLib):
    def __init__(self, src: str):
        BaseLib.__init__(self, src)
        {%- for abi in abis %}
        self.{{ abi.name }} = self.lib.{{ abi.name }}
        self.{{ abi.name }}.argtypes = (
            {%- for arg in abi.inputs -%}
                {{ arg }}
                {%- if not loop.last -%}, {% endif %}
            {%- endfor -%}
        )
        {% if abi.output -%}
            self.{{ abi.name }}.restypes = {{ abi.output }}
        {%- endif -%}
        {% endfor %}

{%- for free_func in free_funcs %}
@use_lib('{{ class_name }}')
def free_func.name (
    {%- for arg in free_func.py_inputs -%}
        {{ arg.name }}: {{ arg.ty }}
        {%- if not loop.last -%}, {% endif %}
    {%- endfor -%}
):

{% endfor %}


@use_lib('{{ class_name }}')
@json_arg(['a'], res=True)
@use_free_func(free_func)
